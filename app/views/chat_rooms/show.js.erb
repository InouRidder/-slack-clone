function setChatRoom() {
  const chatRoom = document.getElementById('chat-room');
  chatRoom.innerHTML = "<%= j render 'chat_rooms/chat_room', chat_room: @chat_room, message: @message %>";
  scrollToLastMessage();
}

App['chat_room_<%= @chat_room.id %>'] = App.cable.subscriptions.create(
    { channel: 'ChatRoomsChannel', chat_room_id: <%= @chat_room.id %> },
    { received: (data) => {
      if (data.current_user_id !== <%= current_user.id %>) {
        const messages = document.getElementById('messages')
        messages.insertAdjacentHTML("beforeend", data.message_partial)
        messages.children[messages.children.length -1].scrollIntoView();
      }
    }
  }
)

setChatRoom();
